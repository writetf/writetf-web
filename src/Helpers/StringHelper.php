<?php

namespace App\Helpers;

class StringHelper
{
    public static function generateRandomString($length = 10)
    {
        $characters = '0123456789abcdefghijklmnopqrstuvwxyz';
        $charactersLength = strlen($characters);
        $randomString = '';
        for ($i = 0; $i < $length; $i++) {
            $randomString .= $characters[rand(0, $charactersLength - 1)];
        }
        return $randomString;
    }

    public static function slugify($str, $delimiter = '.')
    {
        $str = self::sanitize($str, $delimiter);
        $str = strtolower(trim(preg_replace('/[^A-Za-z0-9-]+/', $delimiter, $str), $delimiter));

        return $str . $delimiter . self::generateRandomString(5);
    }

    public static function sanitize($title, $delimiter)
    {
        $map = array();
        $quotedReplacement = preg_quote($delimiter, '/');
        $default = array(
            '/Ã |Ã¡|áº¡|áº£|Ã£|Ã¢|áº§|áº¥|áº­|áº©|áº«|Äƒ|áº±|áº¯|áº·|áº³|áºµ|Ã€|Ã|áº |áº¢|Ãƒ|Ã‚|áº¦|áº¤|áº¬|áº¨|áºª|Ä‚|áº°|áº®|áº¶|áº²|áº´|Ã¥/' => 'a',
            '/Ã¨|Ã©|áº¹|áº»|áº½|Ãª|á»|áº¿|á»‡|á»ƒ|á»…|Ãˆ|Ã‰|áº¸|áºº|áº¼|ÃŠ|á»€|áº¾|á»†|á»‚|á»„|Ã«/' => 'e',
            '/Ã¬|Ã­|á»‹|á»‰|Ä©|ÃŒ|Ã|á»Š|á»ˆ|Ä¨|Ã®/' => 'i',
            '/Ã²|Ã³|á»|á»|Ãµ|Ã´|á»“|á»‘|á»™|á»•|á»—|Æ¡|á»|á»›|á»£|á»Ÿ|á»¡|Ã’|Ã“|á»Œ|á»|Ã•|Ã”|á»’|á»|á»˜|á»”|á»–|Æ |á»œ|á»š|á»¢|á»|á» |Ã¸/' => 'o',
            '/Ã¹|Ãº|á»¥|á»§|Å©|Æ°|á»«|á»©|á»±|á»­|á»¯|Ã™|Ãš|á»¤|á»¦|Å¨|Æ¯|á»ª|á»¨|á»°|á»¬|á»®|Å¯|Ã»/' => 'u',
            '/á»³|Ã½|á»µ|á»·|á»¹|á»²|Ã|á»´|á»¶|á»¸/' => 'y',
            '/Ä‘|Ä/' => 'd',
            '/Ã§/' => 'c',
            '/Ã±/' => 'n',
            '/Ã¤|Ã¦/' => 'ae',
            '/Ã¶/' => 'oe',
            '/Ã¼/' => 'ue',
            '/Ã„/' => 'Ae',
            '/Ãœ/' => 'Ue',
            '/Ã–/' => 'Oe',
            '/ÃŸ/' => 'ss',
            '/[^\s\p{Ll}\p{Lm}\p{Lo}\p{Lt}\p{Lu}\p{Nd}]/mu' => ' ',
            '/\\s+/' => $delimiter,
            sprintf('/^[%s]+|[%s]+$/', $quotedReplacement, $quotedReplacement) => '',
        );
        //Some URL was encode, decode first
        $title = urldecode($title);
        $map = array_merge($map, $default);

        return strtolower(preg_replace(array_keys($map), array_values($map), $title));
    }

    public static function stringToEmoji($str)
    {
        $emojis = [
            'o/' => 'ğŸ‘‹',
            '</3' => 'ğŸ’”',
            '<3' => 'ğŸ’—',
            '8-D' => 'ğŸ˜',
            '8D' => 'ğŸ˜',
            ':-D' => 'ğŸ˜',
            '=-3' => 'ğŸ˜',
            '=-D' => 'ğŸ˜',
            '=3' => 'ğŸ˜',
            '=D' => 'ğŸ˜',
            'B^D' => 'ğŸ˜',
            'X-D' => 'ğŸ˜',
            'XD' => 'ğŸ˜',
            'x-D' => 'ğŸ˜',
            'xD' => 'ğŸ˜',
            ':\')' => 'ğŸ˜‚',
            ':\'-)' => 'ğŸ˜‚',
            ':-))' => 'ğŸ˜ƒ',
            '8)' => 'ğŸ˜„',
            ':)' => 'ğŸ˜„',
            ':-)' => 'ğŸ˜„',
            ':3' => 'ğŸ˜„',
            ':D' => 'ğŸ˜„',
            ':]' => 'ğŸ˜„',
            ':^)' => 'ğŸ˜„',
            ':c)' => 'ğŸ˜„',
            ':o)' => 'ğŸ˜„',
            ':}' => 'ğŸ˜„',
            ':ã£)' => 'ğŸ˜„',
            '=)' => 'ğŸ˜„',
            '=]' => 'ğŸ˜„',
            '0:)' => 'ğŸ˜‡',
            '0:-)' => 'ğŸ˜‡',
            '0:-3' => 'ğŸ˜‡',
            '0:3' => 'ğŸ˜‡',
            '0;^)' => 'ğŸ˜‡',
            'O:-)' => 'ğŸ˜‡',
            '3:)' => 'ğŸ˜ˆ',
            '3:-)' => 'ğŸ˜ˆ',
            '}:)' => 'ğŸ˜ˆ',
            '}:-)' => 'ğŸ˜ˆ',
            '*)' => 'ğŸ˜‰',
            '*-)' => 'ğŸ˜‰',
            ':-,' => 'ğŸ˜‰',
            ';)' => 'ğŸ˜‰',
            ';-)' => 'ğŸ˜‰',
            ';-]' => 'ğŸ˜‰',
            ';D' => 'ğŸ˜‰',
            ';]' => 'ğŸ˜‰',
            ';^)' => 'ğŸ˜‰',
            ':-|' => 'ğŸ˜',
            ':|' => 'ğŸ˜',
            ':(' => 'ğŸ˜’',
            ':-(' => 'ğŸ˜’',
            ':-<' => 'ğŸ˜’',
            ':-[' => 'ğŸ˜’',
            ':-c' => 'ğŸ˜’',
            ':<' => 'ğŸ˜’',
            ':[' => 'ğŸ˜’',
            ':c' => 'ğŸ˜’',
            ':{' => 'ğŸ˜’',
            ':ã£C' => 'ğŸ˜’',
            '%)' => 'ğŸ˜–',
            '%-)' => 'ğŸ˜–',
            ':-P' => 'ğŸ˜œ',
            ':-b' => 'ğŸ˜œ',
            ':-p' => 'ğŸ˜œ',
            ':-Ã' => 'ğŸ˜œ',
            ':-Ã¾' => 'ğŸ˜œ',
            ':P' => 'ğŸ˜œ',
            ':b' => 'ğŸ˜œ',
            ':p' => 'ğŸ˜œ',
            ':Ã' => 'ğŸ˜œ',
            ':Ã¾' => 'ğŸ˜œ',
            ';(' => 'ğŸ˜œ',
            '=p' => 'ğŸ˜œ',
            'X-P' => 'ğŸ˜œ',
            'XP' => 'ğŸ˜œ',
            'd:' => 'ğŸ˜œ',
            'x-p' => 'ğŸ˜œ',
            'xp' => 'ğŸ˜œ',
            ':-||' => 'ğŸ˜ ',
            ':@' => 'ğŸ˜ ',
            ':-.' => 'ğŸ˜¡',
            ':-/' => 'ğŸ˜¡',
            ':/' => 'ğŸ˜¡',
            ':L' => 'ğŸ˜¡',
            ':S' => 'ğŸ˜¡',
            ':\\' => 'ğŸ˜¡',
            '=/' => 'ğŸ˜¡',
            '=L' => 'ğŸ˜¡',
            '=\\' => 'ğŸ˜¡',
            ':\'(' => 'ğŸ˜¢',
            ':\'-(' => 'ğŸ˜¢',
            '^5' => 'ğŸ˜¤',
            '^<_<' => 'ğŸ˜¤',
            'o/\\o' => 'ğŸ˜¤',
            '|-O' => 'ğŸ˜«',
            '|;-)' => 'ğŸ˜«',
            ':###..' => 'ğŸ˜°',
            ':-###..' => 'ğŸ˜°',
            'D-\':' => 'ğŸ˜±',
            'D8' => 'ğŸ˜±',
            'D:' => 'ğŸ˜±',
            'D:<' => 'ğŸ˜±',
            'D;' => 'ğŸ˜±',
            'D=' => 'ğŸ˜±',
            'DX' => 'ğŸ˜±',
            'v.v' => 'ğŸ˜±',
            '8-0' => 'ğŸ˜²',
            ':-O' => 'ğŸ˜²',
            ':-o' => 'ğŸ˜²',
            ':O' => 'ğŸ˜²',
            ':o' => 'ğŸ˜²',
            'O-O' => 'ğŸ˜²',
            'O_O' => 'ğŸ˜²',
            'O_o' => 'ğŸ˜²',
            'o-o' => 'ğŸ˜²',
            'o_O' => 'ğŸ˜²',
            'o_o' => 'ğŸ˜²',
            ':$' => 'ğŸ˜³',
            '#-)' => 'ğŸ˜µ',
            ':#' => 'ğŸ˜¶',
            ':&' => 'ğŸ˜¶',
            ':-#' => 'ğŸ˜¶',
            ':-&' => 'ğŸ˜¶',
            ':-X' => 'ğŸ˜¶',
            ':X' => 'ğŸ˜¶',
            ':-J' => 'ğŸ˜¼',
            ':*' => 'ğŸ˜½',
            ':^*' => 'ğŸ˜½',
            'à² _à² ' => 'ğŸ™…',
            '*\\0/*' => 'ğŸ™†',
            '\\o/' => 'ğŸ™†',
            ':>' => 'ğŸ˜„',
            '>.<' => 'ğŸ˜¡',
            '>:(' => 'ğŸ˜ ',
            '>:)' => 'ğŸ˜ˆ',
            '>:-)' => 'ğŸ˜ˆ',
            '>:/' => 'ğŸ˜¡',
            '>:O' => 'ğŸ˜²',
            '>:P' => 'ğŸ˜œ',
            '>:[' => 'ğŸ˜’',
            '>:\\' => 'ğŸ˜¡',
            '>;)' => 'ğŸ˜ˆ',
            '>_>^' => 'ğŸ˜¤',
        ];

        return strtr($str, $emojis);
    }
}
